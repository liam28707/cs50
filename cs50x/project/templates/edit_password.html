{% extends "layout.html" %}
{% block title %}
    Edit Password
{% endblock %}

{% block main %}
<form action="/passbank/edit/{{ password.id }}" method="post">
    <div class="mb-3">
        <input type="text" class="form-control" id="website_name" name="website_name" placeholder="Website Name" value="{{ password.website_name }}" required>
    </div>
    <div class="mb-3">
        <input type="text" class="form-control" id="username" name="username"  placeholder = "Username" value="{{ password.username }}" required style="width:30%; margin-left:35%";>
    </div>
    <div class="mb-3">
        <input type="text" class="form-control" id="new_password" name="new_password" placeholder="New Password required"style="width:30%; margin-left:35%";>
        <button type="button" class="btn btn-secondary" id="generate-password-btn">Generate</button>
    </div>

    <button type="submit" class="btn btn-primary">Update Password</button>
</form>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        const generateButton = document.getElementById("generate-password-btn");
        const newPasswordInput = document.getElementById("new_password");

        generateButton.addEventListener("click", function() {
            fetch("/generate_password", {
                method: "POST",
                body: JSON.stringify({ length: 12 }), // Adjust the password length if needed
                headers: {
                    "Content-Type": "application/json"
                }
            })
            .then(response => response.text())
            .then(password => {
                newPasswordInput.value = password;
            });
        });
    });
</script>

{% endblock %}
